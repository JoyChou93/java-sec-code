# Java Sec Code

å¯¹äºå­¦ä¹ Javaæ¼æ´ä»£ç æ¥è¯´ï¼Œ`Java Sec Code`æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§ä¸”å‹å¥½çš„é¡¹ç›®ã€‚

[è‹±æ–‡æ–‡æ¡£](https://github.com/JoyChou93/java-sec-code/blob/master/README.md) ğŸ˜‹

## æ‹›è˜

[Alibabaæ‹›è˜-å®‰å…¨æ”»é˜²/ç ”ç©¶ï¼ˆP5-P7ï¼‰](https://github.com/JoyChou93/java-sec-code/wiki/Alibaba-Purple-Team-Job-Description)

## ä»‹ç»

è¯¥é¡¹ç›®ä¹Ÿå¯ä»¥å«åšJava Vulnerability Code(Javaæ¼æ´ä»£ç )ã€‚

æ¯ä¸ªæ¼æ´ç±»å‹ä»£ç é»˜è®¤å­˜åœ¨å®‰å…¨æ¼æ´ï¼ˆé™¤éæœ¬èº«ä¸å­˜åœ¨æ¼æ´ï¼‰ï¼Œç›¸å…³ä¿®å¤ä»£ç åœ¨æ³¨é‡Šé‡Œã€‚å…·ä½“å¯æŸ¥çœ‹æ¯ä¸ªæ¼æ´ä»£ç å’Œæ³¨é‡Šã€‚

ç”±äºæœåŠ¡å™¨åˆ°æœŸï¼Œåœ¨çº¿çš„Demoç½‘ç«™å·²ä¸èƒ½ä½¿ç”¨ã€‚

ç™»å½•ç”¨æˆ·åå¯†ç ï¼š

```
admin/admin123
joychou/joychou123
```

## æ¼æ´ä»£ç 

- [Actuators to RCE](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/resources/logback-online.xml)
- [CommandInject](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/CommandInject.java)
- [CORS](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/CORS.java)
- [CRLF Injection](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/CRLFInjection.java)
- [CSRF](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/security/WebSecurityConfig.java)
- [CVE-2022-22978](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/security/WebSecurityConfig.java)
- [Deserialize](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/Deserialize.java)
- [Fastjson](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/Fastjson.java)
- [File Upload](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/FileUpload.java)
- [IP Forge](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/IPForge.java)
- [Java RMI](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/RMI/Server.java)
- [JSONP](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/jsonp/JSONP.java)
- [Log4j](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/Log4j.java)
- [ooxmlXXE](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/othervulns/ooxmlXXE.java)
- [PathTraversal](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/PathTraversal.java)
- [QLExpress](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/QLExpress.java)
- [RCE](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/Rce.java)
    - Runtime
    - ProcessBuilder  
    - ScriptEngine
    - Yaml Deserialize
    - Groovy
- [Shiro](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/Shiro.java)
- [SpEL](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/SpEL.java)
- [SQL Injection](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/SQLI.java)
- [SSRF](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/SSRF.java)
- [SSTI](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/SSTI.java)
- [URL Redirect](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/URLRedirect.java)
- [URL whitelist Bypass](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/URLWhiteList.java)
- [xlsxStreamerXXE](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/othervulns/xlsxStreamerXXE.java)
- [XSS](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/XSS.java)
- [XStream](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/XStreamRce.java)
- [XXE](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/XXE.java)
- [JWT](https://github.com/JoyChou93/java-sec-code/blob/master/src/main/java/org/joychou/controller/Jwt.java)

## æ¼æ´è¯´æ˜

- [Actuators to RCE](https://github.com/JoyChou93/java-sec-code/wiki/Actuators-to-RCE)
- [CORS](https://github.com/JoyChou93/java-sec-code/wiki/CORS)
- [CSRF](https://github.com/JoyChou93/java-sec-code/wiki/CSRF)
- [Deserialize](https://github.com/JoyChou93/java-sec-code/wiki/Deserialize)
- [Fastjson](https://github.com/JoyChou93/java-sec-code/wiki/Fastjson)
- [Java RMI](https://github.com/JoyChou93/java-sec-code/wiki/Java-RMI)
- [JSONP](https://github.com/JoyChou93/java-sec-code/wiki/JSONP)
- [POI-OOXML XXE](https://github.com/JoyChou93/java-sec-code/wiki/Poi-ooxml-XXE)
- [SQLI](https://github.com/JoyChou93/java-sec-code/wiki/SQL-Inject)
- [SSRF](https://github.com/JoyChou93/java-sec-code/wiki/SSRF)
- [SSTI](https://github.com/JoyChou93/java-sec-code/wiki/SSTI)
- [URL whitelist Bypass](https://github.com/JoyChou93/java-sec-code/wiki/URL-whtielist-Bypass)
- [XXE](https://github.com/JoyChou93/java-sec-code/wiki/XXE)
- [JWT](https://github.com/JoyChou93/java-sec-code/wiki/JWT)  
- [Others](https://github.com/JoyChou93/java-sec-code/wiki/others)


## å¦‚ä½•è¿è¡Œ

åº”ç”¨ä¼šç”¨åˆ°mybatisè‡ªåŠ¨æ³¨å…¥ï¼Œè¯·æå‰è¿è¡ŒmysqlæœåŠ¡ï¼Œå¹¶ä¸”é…ç½®mysqlæœåŠ¡çš„æ•°æ®åº“åç§°å’Œç”¨æˆ·åå¯†ç (é™¤éæ˜¯Dockerç¯å¢ƒ)ã€‚

``` 
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/java_sec_code
spring.datasource.username=root
spring.datasource.password=woshishujukumima
```

- Docker
- IDEA
- Tomcat
- JAR

### Docker

å¼€å¯åº”ç”¨ï¼š

``` 
docker-compose pull
docker-compose up
```

å…³é—­åº”ç”¨ï¼š

```
docker-compose down
```

Dockerç¯å¢ƒï¼š

- Java 1.8.0_102
- Mysql 8.0.17
- Tomcat 8.5.11

### IDEA

- `git clone https://github.com/JoyChou93/java-sec-code`
- åœ¨IDEAä¸­æ‰“å¼€ï¼Œç›´æ¥ç‚¹å‡»runæŒ‰é’®å³å¯è¿è¡Œã€‚

ä¾‹å­ï¼š

```
http://localhost:8080/rce/exec?cmd=whoami
```
 
è¿”å›ï¼š

``` 
Viarus
```

### Tomcat

1. `git clone https://github.com/JoyChou93/java-sec-code & cd java-sec-code`
2. ç”ŸæˆwaråŒ… `mvn clean package`
3. å°†targetç›®å½•çš„waråŒ…ï¼Œcpåˆ°Tomcatçš„webappsç›®å½•
4. é‡å¯Tomcatåº”ç”¨


ä¾‹å­ï¼š

```
http://localhost:8080/java-sec-code-1.0.0/rce/runtime/exec?cmd=whoami
```
 
è¿”å›ï¼š

``` 
Viarus
```


### JARåŒ…


å…ˆä¿®æ”¹pom.xmlé‡Œçš„é…ç½®ï¼Œå°†waræ”¹æˆjarã€‚

``` 
    <groupId>sec</groupId>
    <artifactId>java-sec-code</artifactId>
    <version>1.0.0</version>
    <packaging>war</packaging>
```

å†æ‰“åŒ…è¿è¡Œå³å¯ã€‚

```
git clone https://github.com/JoyChou93/java-sec-code
cd java-sec-code
mvn clean package -DskipTests 
java -jar æ‰“åŒ…åçš„jaråŒ…è·¯å¾„
```

## è®¤è¯

### ç™»å½•

[http://localhost:8080/login](http://localhost:8080/login)

å¦‚æœæœªç™»å½•ï¼Œè®¿é—®ä»»ä½•é¡µé¢éƒ½ä¼šé‡å®šå‘åˆ°loginé¡µé¢ã€‚ç”¨æˆ·åå’Œå¯†ç å¦‚ä¸‹ã€‚

```
admin/admin123
joychou/joychou123
```
### ç™»å‡º

[http://localhost:8080/logout](http://localhost:8080/logout)

### è®°ä½æˆ‘

Tomcaté»˜è®¤JSESSIONä¼šè¯æœ‰æ•ˆæ—¶é—´ä¸º30åˆ†é’Ÿï¼Œæ‰€ä»¥30åˆ†é’Ÿä¸æ“ä½œä¼šè¯å°†è¿‡æœŸã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¼•å…¥rememberMeåŠŸèƒ½ï¼Œé»˜è®¤è¿‡æœŸæ—¶é—´ä¸º2å‘¨ã€‚


## è´¡çŒ®è€…

æ ¸å¿ƒå¼€å‘è€…ï¼š [JoyChou](https://github.com/JoyChou93).å…¶ä»–å¼€å‘è€…ï¼š[lightless](https://github.com/lightless233),  [Anemone95](https://github.com/Anemone95)ã€‚æ¬¢è¿å„ä½æäº¤PRã€‚

## æ”¯æŒ

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥starè¯¥é¡¹ç›®æ”¯æŒæˆ‘ã€‚ æœ‰äº†ä½ çš„æ”¯æŒï¼Œæˆ‘å°†èƒ½å¤Ÿæ›´å¥½åœ°åˆ¶ä½œ`Java sec code`é¡¹ç›®ã€‚

